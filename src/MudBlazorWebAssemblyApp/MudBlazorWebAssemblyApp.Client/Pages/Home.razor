@page "/"
@using MudBlazorWebAssemblyApp.Client.Services
@inject ILocalStorageService Storage;
@inject IJSRuntime JS

<PageTitle>Home</PageTitle>

<MudText Typo="Typo.h3" GutterBottom="true">Hello, world!</MudText>
<MudText Class="mb-8">Welcome to your new app, powered by MudBlazor and the .NET 9 Template!</MudText>

<MudButton Variant="Variant.Filled" StartIcon="@Icons.Custom.Uncategorized.Radioactive" Color="Color.Warning" @onclick=@ShowAlert>Warning</MudButton>

<MudButton Variant="Variant.Filled" StartIcon="@Icons.Custom.Uncategorized.Bacteria" Color="Color.Dark" @onclick=@ShowLogConsole>Log To Console</MudButton>

<MudSwitch Label="Zgoda na ciasteczka" @bind-value="@AcceptCookies" Color="Color.Primary" />




<MudButton Variant="Variant.Filled" StartIcon="@Icons.Custom.Uncategorized.Bacteria" Color="Color.Dark" @onclick=@SaveAccept>Zapisz zgode</MudButton>

<MudButton Variant="Variant.Filled" StartIcon="@Icons.Custom.Uncategorized.Bacteria" Color="Color.Dark" @onclick=@LoadAccept>Pobierz zgode</MudButton>


@code {

    private bool AcceptCookies;

    private async Task ShowAlert()
    {
      //  await JS.InvokeVoidAsync("alert", "Hello World!");
    }

    private async Task ShowLogConsole()
    {
        // Console.WriteLine("Hello World!");
        // await JS.InvokeVoidAsync("console.log", "Hello World!");

        // await JS.InvokeVoidAsync("x++");

    }


    // localStorage.setItem("accept-cookies", "true");
    private async Task SaveAccept()
    {        
        await Storage.SetItem("accept-cookies", AcceptCookies.ToString());
    }

    // localStorage.getItem("accept-cookies");
    private async Task LoadAccept()
    {   
        var value = await Storage.GetItem("accept-cookies");

        AcceptCookies = bool.Parse(value);
    }   


}